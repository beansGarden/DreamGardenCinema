<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="edu.kh.dgc.mypage.model.dao.MypageMapper">
	
	<resultMap type="Qna" id="qna_rm">
	
		<id property="qnaNo" column="QNA_NO"/>
		
		<result property="qnaTitle" column="QNA_TITLE"/>
		<result property="qnaContent" column="QNA_CONTENT"/>
		<result property="qnaEnrollDate" column="QNA_ENROLL_DATE"/>
		<result property="qnaDeleteFl" column="QNA_DELETE_FL"/>
		<result property="qnaCheckFl" column="QNA_CHECK_FL"/>
		<result property="qnaCategory" column="QNA_CATEGORY"/>
		<result property="userNo" column="USER_NO2"/>
		<result property="userNickname" column="USER_NICKNAME"/>
		
		<!--JOIN QNA_COMMENT-->
		<result property="qnaCommentNo" column="QNA_COMMENT_NO"/>
		<result property="qnaCommentDate" column="QNA_COMMENT_DATE"/>
		<result property="qnaCommentFl" column="QNA_COMMENT_FL"/>
		<result property="qnaComment" column="QNA_COMMENT"/>
		<!--JOIN USER_INFO-->
		<result property="userRating" column="USER_RATING"/>
		
	</resultMap>
	
	<!--나의 1:1 문의 내역 조회-->
	<select id="myQnaList" resultMap="qna_rm">
		SELECT Q.QNA_NO,QNA_TITLE,QNA_CONTENT,QNA_CHECK_FL,QNA_CATEGORY,QNA_ENROLL_DATE,QNA_COMMENT,USER_RATING
		FROM QNA Q
		JOIN USER_INFO U ON (U.USER_NO = USER_NO2)
		LEFT JOIN "QNA _COMMENT" C ON (Q.QNA_NO = C.QNA_NO)
		WHERE USER_NO2 = #{userNo}
	</select>
</mapper>